# AECRETEC 要求定義書 2026  
*AECRETEC System Requirements 2026*
> 本要求定義書は、以下の思想憲章に基づいて策定されている。  
> 詳細は「[AECRETEC 思想憲章（Charter）](CHARTER.md)」を参照されたい。

---

## ライセンス / License

本文章は **Creative Commons Attribution-ShareAlike 4.0 International (CC-BY-SA-4.0)**  
の下で公開される。

---

## 1. 本書の目的

本書は、分散型創作物保全・流通構想 **AECRETEC** において、

- 何を実現する必要があるか（必須要件）
- 何を前提とし、何を前提としないか
- 実装・技術選定に依存しない設計要求

を明文化することを目的とする。

本書は **実装仕様書ではない**。  
アルゴリズム、言語、ブロックチェーン、ストレージ方式の選定は将来の実装者に委ねる。

---

## 2. 用語定義

| 用語 | 定義 |
|---|---|
| コンテンツ | 書籍、画像、音声、映像、研究資料等のデジタルデータ本体 |
| CID | 内容アドレス（Content Identifier）。内容が同一なら同一となる識別子 |
| ノード | AECRETEC ネットワークに参加する計算・保存主体 |
| ストレージノード | コンテンツを保存するノード |
| ゲートウェイノード | ネットワーク外との入出力を担うノード |
| ラッパー | コンテンツの外側に付与される証明・履歴情報 |
| 内部ラベル | コンテンツ内部に埋め込まれる抑止・識別情報 |
| DID | 分散型識別子 |
| トランザクション | 権利移転・発行・貸与等を示す記録 |

---

## 3. システム全体要件

### 3.1 分散性

- 単一の管理者・サーバー・企業を前提としない
- 複数実装・複数ネットワーク参加形態を許容する

---

### 3.2 検閲耐性と法令順守

- プロトコル自体は恣意的削除を行えない
- ノード運用者は各自の法域に従う責任を負う
- 違法性の判断は分散的・後追い的に行われる

---

### 3.3 オフライン利用可能性

- コンテンツは **専用ソフト・常時オンライン接続を必要としない**
- 既存のプレーヤー・ビューアで利用可能でなければならない

---

## 4. コンテンツ識別要件

### 4.1 単一CID原則

- コンテンツ本体は原則として **単一の CID** を持つ
- 表示形式・流通形態・ラッピングは CID を変えない

---

### 4.2 CID派生の制限

- 派生 CID の生成は以下に限定される：
  - 内部ラベル埋め込み
  - 不可逆変換（解像度変更等）
- 無意味な CID 爆発を設計上抑制する

---

## 5. ラッピングモデル要件

### 5.1 ラッパー（外部）

ラッパーはコンテンツ本体とは分離され、以下を含み得る：

- 対応するコンテンツ CID
- トランザクション ID
- 発行ノード識別子
- 発行日時
- 署名情報

ラッパーは **交換・更新・失効可能**でなければならない。

---

### 5.2 内部ラベル（内部）

内部ラベルは、ネットワーク外へ出る全てのコンテンツに **必須** とする。

内部ラベルは以下を含む：

- holder_did（平文）
- issuer_node
- issued_at
- wrapper_cid
- （任意）issuer_signature

---

### 5.3 内部ラベルの目的

- オフライン環境における抑止力
- 不正流出時の責任所在推定
- 非ログイン環境での最低限の証明

---

## 6. ゲートウェイノード要件

- ネットワーク外との入出力は原則ゲートウェイノードが担う
- 内部ラベルの付与・更新・検証を行う
- 一時閲覧・確認用途でも内部ラベルを省略してはならない

---

## 7. 再ラッピング・再発行要件

- 完全な海賊版データであっても、内容が同一なら再統合可能
- 再発行はスマートコントラクトまたは同等のルールに従う
- 再ラッピングは履歴として追跡可能であること

---

## 8. 取引・権利要件

- 所有、販売、貸与、返却を区別可能であること
- 一時的アクセス（レンタル）を issued_at 等で表現可能であること
- ラベル欠落コンテンツは「資産」として扱われない

---

## 9. 報酬・インセンティブ要件

- ストレージ報酬と処理報酬を区別する
- キャッシュ・配信・ラッピング処理に対価を与える
- 不正行為による報酬獲得を抑制する設計とする

---

## 10. 相互運用性要件

- 特定チェーン・通貨に依存しない
- 外部チェーン・フォークの存在を前提とする
- AECRETEC 準拠／非準拠を明確に区別可能とする

---

## 11. セキュリティ要件（概要）

- 署名は検証可能であること
- 秘密鍵の集中管理を前提としない
- ノード不正を前提に設計する

---

## 12. 非目標（Non-Goals）

- 完全な違法コピー防止
- 思想・表現内容の審査
- 単一の正解実装
- 永続的中央運営

---

## 13. 更新と継承

- 本要求定義書は改訂され得る
- 改訂は履歴を保持し断絶しない
- 将来の実装者は、本書と思想憲章の整合を尊重する

---

## 追補：暗号化・メタデータ・匿名ネットワークに関する要件

### 1. エンドツーエンド暗号化（E2E）の選択肢
- システムは、アップロードする各コンテンツに対してクライアント側で行うエンドツーエンド暗号化（E2E）を**任意選択**できることをサポートすること。  
- E2E を選択した場合、ノードは復号できない暗号化ブロブのみを保存するものとする。復号鍵の配布方式（受信者限定、閾値秘密分散、第三者委託など）はクライアント側で選択可能とする。

### 2. オンチェーン目録と内部ラベルの役割分担
- オンチェーンは「公開目録（catalog）」として用いる。オンチェーンに記録する最小限の項目には、`CID`（コンテンツ参照）、`creator_DID`（公開用の識別子、原則 pseudonymous）、`issued_at`（発行日時）、`rights_metadata_hash`（オフチェーン完全権利メタデータのハッシュ）および `rights_status` を含めることを推奨する。  
- 内部ラベル（operational metadata）は流通・配信に関する可変情報を扱い、`holder_did_hash`、`issuer_node`、`issued_at`、`rental_until`、`tx_id`、`node_signature` 等を含める。内部ラベルは**原則としてオフチェーンで管理**し、デフォルトでハッシュ化または暗号化して保存すること。

### 3. 匿名ネットワークに関する前提（推奨）
- AECRETEC は Tor 等の匿名通信ネットワークを用いたアクセスを設計上排除しないことを推奨する。これは必須実装を要求するものではなく、表現の自由や安全性が制限される環境にある利用者に対して、接続手段として選択肢が提供され得ることを明示するための追記である。  
- 匿名ネットワークの利用に関しては、クライアントの OPSEC（端末の安全化、メタデータ削除、信頼できる接続手段の利用等）を併せて推奨する。

### 4. オーファン / 流出メディア（保存）ポリシー
- 原本が喪失している、あるいは公式な正規データが現存しないコンテンツ（以下「出所未確認コンテンツ」）の保存は許容するが、**保存（アーカイブ）と流通（配信・商用化）は明確に分離**する。出所未確認コンテンツは `rights_status = unverified` として登録される。  
- これらのコンテンツに収益が発生した場合、収益はスマートコントラクトによりエスクローされ、権利者が確認・申請された場合に、所定の手続きに従って配分されるものとする。権利者が確認されない限り、商用配信は原則禁止する運用を推奨する。

---

*Requirements defined for 2026 and beyond*  
*Published under CC-BY-SA-4.0*